<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Portal Onboarding</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: #0079C1;
            z-index: 1;
            transition: width 0.3s ease;
            width: var(--progress, 0%);
        }

        .step {
            position: relative;
            text-align: center;
            flex: 1;
            z-index: 2;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fff;
            border: 2px solid #e0e0e0;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .step.active .step-circle,
        .step.completed .step-circle {
            border-color: #0079C1;
            background: #0079C1;
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #666;
        }

        .step.active .step-label {
            color: #0079C1;
            font-weight: 500;
        }

        .form-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .form-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #333;
            margin-bottom: 24px;
            font-size: 24px;
        }

        .api-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 32px;
        }

        .api-card {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .api-card:hover {
            border-color: #0079C1;
            background: #f0f8ff;
        }

        .api-card.selected {
            border-color: #0079C1;
            background: #e6f4ff;
        }

        .api-card input[type="checkbox"] {
            display: none;
        }

        .api-card h3 {
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .api-card .checkbox-icon {
            width: 20px;
            height: 20px;
            border: 2px solid #999;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .api-card.selected .checkbox-icon {
            background: #0079C1;
            border-color: #0079C1;
        }

        .api-card.selected .checkbox-icon::after {
            content: '';
            color: white;
            font-size: 14px;
        }

        .api-card p {
            color: #666;
            font-size: 14px;
        }

        .info-banner {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 24px;
        }

        .info-banner h4 {
            color: #856404;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-banner p {
            color: #856404;
            font-size: 14px;
            line-height: 1.5;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #0079C1;
            box-shadow: 0 0 0 3px rgba(0, 121, 193, 0.1);
        }

        .user-form {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #fafbfc;
        }

        .user-list {
            margin-top: 24px;
        }

        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            margin-bottom: 12px;
        }

        .user-info {
            flex: 1;
        }

        .user-info strong {
            display: block;
            color: #333;
            margin-bottom: 4px;
        }

        .user-info span {
            color: #666;
            font-size: 14px;
        }

        .btn-remove {
            padding: 6px 12px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }

        .btn-remove:hover {
            background: #c82333;
        }

        .btn-add {
            padding: 10px 20px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s ease;
        }

        .btn-add:hover {
            background: #218838;
        }

        .review-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .review-section h3 {
            color: #333;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .edit-link {
            color: #0079C1;
            text-decoration: none;
            font-size: 14px;
            font-weight: normal;
            cursor: pointer;
        }

        .edit-link:hover {
            text-decoration: underline;
        }

        .review-content {
            color: #666;
            line-height: 1.6;
        }

        .api-list, .member-list {
            list-style: none;
            padding-left: 0;
        }

        .api-list li, .member-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .api-list li:last-child, .member-list li:last-child {
            border-bottom: none;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: #28a745;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .success-icon::after {
            content: '';
            color: white;
            font-size: 48px;
        }

        .success-message {
            text-align: center;
            margin-bottom: 32px;
        }

        .success-message h2 {
            color: #28a745;
            margin-bottom: 16px;
        }

        .success-message p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .button-group {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            margin-top: 32px;
        }

        .button-group.center {
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-secondary {
            background: #fff;
            color: #666;
            border: 1px solid #ddd;
        }

        .btn-secondary:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        .btn-primary {
            background: #0079C1;
            color: white;
        }

        .btn-primary:hover {
            background: #005a91;
        }

        .btn-primary:disabled {
            background: #adb5bd;
            cursor: not-allowed;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        @media (max-width: 640px) {
            .container {
                padding: 24px;
            }

            .api-selection {
                grid-template-columns: 1fr;
            }

            .step-label {
                font-size: 10px;
            }

            .button-group {
                flex-direction: column-reverse;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-bar" style="--progress: 0%">
            <div class="step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">API Selection</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Team Members</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Review</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-circle">4</div>
                <div class="step-label">Complete</div>
            </div>
        </div>

        <!-- Step 1: API Selection -->
        <div class="form-step active" id="step1">
            <h2>Select API Categories</h2>
            <p style="color: #666; margin-bottom: 24px;">Choose the API categories you need access to. You can select one or both options.</p>

            <div class="api-selection">
                <div class="api-card" onclick="toggleApiCard(this, 'account-api')">
                    <input type="checkbox" id="account-api" name="api" value="Account APIs">
                    <h3>
                        <span class="checkbox-icon"></span>
                        Account APIs
                    </h3>
                    <p>Access account information, balances, transactions, and account details through our secure APIs.</p>
                </div>

                <div class="api-card" onclick="toggleApiCard(this, 'payment-api')">
                    <input type="checkbox" id="payment-api" name="api" value="Payment APIs">
                    <h3>
                        <span class="checkbox-icon"></span>
                        Payment APIs
                    </h3>
                    <p>Initiate payments, transfers, and manage payment workflows with our comprehensive payment APIs.</p>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="nextStep()" id="step1-next" disabled>Next</button>
            </div>
        </div>

        <!-- Step 2: Developer Portal Users -->
        <div class="form-step" id="step2">
            <h2>Add Developer Portal Users</h2>

            <div class="info-banner">
                <h4>  Important Information</h4>
                <p>Developer portal users will have access only to developer.bmo.com. They will not be able to access anything on Online Banking for Business. They have no access to any of the accounts or services within online banking, and access is exclusively for developer.bmo.com.</p>
            </div>

            <div class="user-form">
                <div class="form-group">
                    <label for="user-name">Name</label>
                    <input type="text" id="user-name" placeholder="Enter team member's name">
                </div>
                <div class="form-group">
                    <label for="user-email">Email</label>
                    <input type="email" id="user-email" placeholder="Enter team member's email">
                </div>
                <button class="btn-add" onclick="addUser()">Add User</button>
            </div>

            <div class="user-list" id="userList">
                <!-- Users will be added here dynamically -->
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousStep()">Back</button>
                <button class="btn btn-primary" onclick="nextStep()">Next</button>
            </div>
        </div>

        <!-- Step 3: Review -->
        <div class="form-step" id="step3">
            <h2>Review Your Request</h2>

            <div class="review-section">
                <h3>
                    API Access
                    <a class="edit-link" onclick="goToStep(1)">Edit</a>
                </h3>
                <div class="review-content">
                    <p><strong>Selected APIs (Sandbox Access):</strong></p>
                    <ul class="api-list" id="reviewApiList">
                        <!-- API list will be populated here -->
                    </ul>
                </div>
            </div>

            <div class="review-section">
                <h3>
                    Team Members
                    <a class="edit-link" onclick="goToStep(2)">Edit</a>
                </h3>
                <div class="review-content">
                    <p><strong>Developer Portal Users:</strong></p>
                    <ul class="member-list" id="reviewMemberList">
                        <!-- Member list will be populated here -->
                    </ul>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="previousStep()">Back</button>
                <button class="btn btn-success" onclick="submitForm()">Submit Request</button>
            </div>
        </div>

        <!-- Step 4: Success -->
        <div class="form-step" id="step4">
            <div class="success-icon"></div>
            <div class="success-message">
                <h2>Request Submitted Successfully!</h2>
                <p>Your developer portal access request has been submitted.</p>
                <p><strong>Developer portal users will receive an email at their registered email addresses with login instructions.</strong></p>
                <p>As the PCA user, you have been automatically granted sandbox access and can immediately log into developer.bmo.com.</p>
            </div>

            <div class="button-group center">
                <button class="btn btn-primary" onclick="goToDevPortal()">Go to Developer Portal</button>
                <button class="btn btn-secondary" onclick="closeForm()">Close</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedApis = [];
        let users = [];

        function toggleApiCard(card, apiId) {
            const checkbox = document.getElementById(apiId);
            checkbox.checked = !checkbox.checked;

            if (checkbox.checked) {
                card.classList.add('selected');
                if (!selectedApis.includes(checkbox.value)) {
                    selectedApis.push(checkbox.value);
                }
            } else {
                card.classList.remove('selected');
                selectedApis = selectedApis.filter(api => api !== checkbox.value);
            }

            // Enable/disable next button
            const nextBtn = document.getElementById('step1-next');
            nextBtn.disabled = selectedApis.length === 0;
        }

        function addUser() {
            const nameInput = document.getElementById('user-name');
            const emailInput = document.getElementById('user-email');

            const name = nameInput.value.trim();
            const email = emailInput.value.trim();

            if (!name || !email) {
                alert('Please enter both name and email');
                return;
            }

            if (!isValidEmail(email)) {
                alert('Please enter a valid email address');
                return;
            }

            // Check for duplicate email
            if (users.some(user => user.email === email)) {
                alert('This email has already been added');
                return;
            }

            const user = { name, email };
            users.push(user);

            updateUserList();

            // Clear form
            nameInput.value = '';
            emailInput.value = '';
            nameInput.focus();
        }

        function removeUser(index) {
            users.splice(index, 1);
            updateUserList();
        }

        function updateUserList() {
            const userList = document.getElementById('userList');

            if (users.length === 0) {
                userList.innerHTML = '<p style="color: #999; text-align: center;">No users added yet</p>';
                return;
            }

            userList.innerHTML = users.map((user, index) => `
                <div class="user-item">
                    <div class="user-info">
                        <strong>${user.name}</strong>
                        <span>${user.email}</span>
                    </div>
                    <button class="btn-remove" onclick="removeUser(${index})">Remove</button>
                </div>
            `).join('');
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function updateProgressBar() {
            const progressBar = document.querySelector('.progress-bar');
            const progress = ((currentStep - 1) / 3) * 100;
            progressBar.style.setProperty('--progress', `${progress}%`);

            // Update step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                const stepNum = index + 1;
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        function showStep(stepNumber) {
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });

            document.getElementById(`step${stepNumber}`).classList.add('active');
            currentStep = stepNumber;
            updateProgressBar();

            // Update review page if showing step 3
            if (stepNumber === 3) {
                updateReviewPage();
            }
        }

        function nextStep() {
            if (currentStep === 1 && selectedApis.length === 0) {
                alert('Please select at least one API category');
                return;
            }

            if (currentStep < 4) {
                showStep(currentStep + 1);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        function goToStep(stepNumber) {
            showStep(stepNumber);
        }

        function updateReviewPage() {
            // Update API list
            const apiList = document.getElementById('reviewApiList');
            if (selectedApis.length > 0) {
                apiList.innerHTML = selectedApis.map(api => `<li>${api}</li>`).join('');
            } else {
                apiList.innerHTML = '<li style="color: #999;">No APIs selected</li>';
            }

            // Update member list
            const memberList = document.getElementById('reviewMemberList');
            if (users.length > 0) {
                memberList.innerHTML = users.map(user => `<li>${user.name} - ${user.email}</li>`).join('');
            } else {
                memberList.innerHTML = '<li style="color: #999;">No team members added</li>';
            }
        }

        function submitForm() {
            // In a real application, this would send data to a server
            console.log('Submitting form:', {
                apis: selectedApis,
                users: users
            });

            showStep(4);
        }

        function goToDevPortal() {
            // In a real application, this would redirect to developer.bmo.com
            window.open('https://developer.bmo.com', '_blank');
        }

        function closeForm() {
            // In a real application, this would close the form or redirect
            if (confirm('Are you sure you want to close this form?')) {
                window.close();
                // Fallback if window.close() doesn't work
                window.location.href = 'about:blank';
            }
        }

        // Initialize
        updateUserList();
        updateProgressBar();

        // Add enter key support for user form
        document.getElementById('user-email').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addUser();
            }
        });
    </script>
</body>
</html>